[2026-02-20 13:41:06 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 13:41:06 ERR] Ocurrió un error al inicializar la base de datos {"SourceContext":"Program"}
Npgsql.PostgresException (0x80004005): 28P01: password authentication failed for user "IN6AV"
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.Internal.NpgsqlConnector.Authenticate(String username, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.<Open>g__OpenCore|214_1(NpgsqlConnector conn, SslMode sslMode, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.Internal.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.UnpooledDataSource.Get(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)
   at Npgsql.NpgsqlConnection.<Open>g__OpenAsync|42_0(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlDatabaseCreator.Exists(Boolean async, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabaseCreator.EnsureCreatedAsync(CancellationToken cancellationToken)
   at Program.<Main>$(String[] args) in C:\Users\Informatica\Documents\Gestión de Opiniones\authentication-service\auth-service\src\AuthService.Api\Program.cs:line 148
  Exception data:
    Severity: FATAL
    SqlState: 28P01
    MessageText: password authentication failed for user "IN6AV"
    File: auth.c
    Line: 339
    Routine: auth_failed
[2026-02-20 13:55:19 ERR] Failed executing DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT migration_id, product_version
FROM "__EFMigrationsHistory"
ORDER BY migration_id; {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command"}
[2026-02-20 13:57:30 INF] Verificando conexión a la base de datos... {"SourceContext":"Program"}
[2026-02-20 13:57:30 INF] Base de datos lista. Ejecutando datos semilla... {"SourceContext":"Program"}
[2026-02-20 13:57:30 INF] Inicialización de base de datos completada exitosamente {"SourceContext":"Program"}
[2026-02-20 13:57:30 INF] API de AuthService está ejecutándose en http://localhost:5210. Endpoint de salud: http://localhost:5210/health {"SourceContext":"Program"}
[2026-02-20 13:57:33 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJGN94R8HK0:00000001","RequestPath":"/","ConnectionId":"0HNJGN94R8HK0"}
[2026-02-20 13:57:33 INF] HTTP GET / responded 404 in 13.6809 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK0:00000001","ConnectionId":"0HNJGN94R8HK0"}
[2026-02-20 13:57:34 INF] HTTP GET / responded 404 in 1.0789 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK0:00000002","ConnectionId":"0HNJGN94R8HK0"}
[2026-02-20 13:57:35 INF] HTTP GET / responded 404 in 1.1511 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK0:00000003","ConnectionId":"0HNJGN94R8HK0"}
[2026-02-20 13:57:35 INF] HTTP GET / responded 404 in 0.0760 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK0:00000004","ConnectionId":"0HNJGN94R8HK0"}
[2026-02-20 13:57:39 INF] HTTP GET /health responded 200 in 32.6592 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK0:00000005","ConnectionId":"0HNJGN94R8HK0"}
[2026-02-20 13:57:39 INF] HTTP GET /favicon.ico responded 404 in 0.0765 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK0:00000006","ConnectionId":"0HNJGN94R8HK0"}
[2026-02-20 14:01:42 INF] User kcuyuchxdd registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:01:42 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:01:42 INF] HTTP POST /api/v1/auth/register responded 201 in 2244.3567 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK3:00000001","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:01:44 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:01:44 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:01:44 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:01:44 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:03:53 INF] User kcuyuchlol registered successfully {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:03:53 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:03:53 INF] HTTP POST /api/v1/auth/register responded 201 in 1019.4883 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK3:00000002","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:03:54 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:03:54 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:03:54 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:03:54 INF] Verification email sent {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"c7d23260-0bba-42c7-bd0e-e1c6c849f1ca","ActionName":"AuthService.Api.Controllers.AuthController.Register (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:04:19 WRN] Validación de certificados SSL deshabilitada. Solo usar en desarrollo. {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"6f1a1eaf-89df-4542-801a-27547f07af21","ActionName":"AuthService.Api.Controllers.AuthController.verifyEmail (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:04:20 INF] Email enviado exitosamente {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"6f1a1eaf-89df-4542-801a-27547f07af21","ActionName":"AuthService.Api.Controllers.AuthController.verifyEmail (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:04:21 INF] Pipeline de email completado {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"6f1a1eaf-89df-4542-801a-27547f07af21","ActionName":"AuthService.Api.Controllers.AuthController.verifyEmail (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:04:21 INF] Email processed {"SourceContext":"AuthService.Application.Services.EmailService","ActionId":"6f1a1eaf-89df-4542-801a-27547f07af21","ActionName":"AuthService.Api.Controllers.AuthController.verifyEmail (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:04:21 INF] Email verified successfully for user kcuyuchlol {"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"6f1a1eaf-89df-4542-801a-27547f07af21","ActionName":"AuthService.Api.Controllers.AuthController.verifyEmail (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000003","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:04:21 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 1115.2273 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK3:00000003","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:04:32 INF] User login succeeded {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService.Application.Services.AuthService","ActionId":"89d4dffc-1a23-4a7f-9f50-ddd7e32423a7","ActionName":"AuthService.Api.Controllers.AuthController.Login (AuthService.Api)","RequestId":"0HNJGN94R8HK3:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJGN94R8HK3"}
[2026-02-20 14:04:32 INF] HTTP POST /api/v1/auth/login responded 200 in 90.1360 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJGN94R8HK3:00000004","ConnectionId":"0HNJGN94R8HK3"}
